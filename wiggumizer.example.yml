# Wiggumizer Configuration
# See: https://github.com/bradledford/wiggumizer#configuration

# Default AI provider
provider: claude

# Maximum iterations before stopping (safety limit)
# Work continues until PROMPT.md tasks are complete OR this limit is reached
maxIterations: 20

# Automatically commit changes after each iteration
autoCommit: false

# Fast mode: use quicker model (Sonnet) with shorter responses
# Can also be enabled with --fast flag
fast: false

# Validation - runs before declaring convergence
# Ensures work is actually complete and functional
validation:
  # Auto-detection (enabled by default)
  # Automatically detects project type and appropriate commands
  # Supports: Node.js, Python, Java, Go, Rust, Ruby, PHP, .NET, C/C++, Swift, and more
  autoDetect: true             # Auto-detect test/build commands from project type

  runTests: false              # Set to true to run tests before converging
  # testCommand: null          # Leave null for auto-detection
                               # Or specify manually: "npm test", "pytest", "go test", "cargo test", etc.
  requireTestPass: true        # Require tests to pass for convergence

  runBuild: false              # Set to true to run build before converging
  # buildCommand: null         # Leave null for auto-detection
                               # Or specify manually: "npm run build", "cargo build", "go build", etc.
  requireBuildSuccess: true    # Require build to succeed for convergence

  timeout: 300000              # 5 minute timeout for validation commands (milliseconds)

  # Custom validation checks (optional, language-agnostic)
  # customChecks:
  #   # Node.js / TypeScript
  #   - name: "Type Check"
  #     command: "tsc --noEmit"
  #     required: true
  #
  #   # Python
  #   - name: "Type Check"
  #     command: "mypy src/"
  #     required: true
  #
  #   # Rust
  #   - name: "Clippy"
  #     command: "cargo clippy"
  #     required: false
  #
  #   # Any language - linting, security scans, etc.
  #   - name: "Security Scan"
  #     command: "your-security-tool scan"
  #     required: true

# Context limits
context:
  maxSize: 100000  # Maximum context size in bytes (100KB)
  maxFiles: 50     # Maximum number of files to include

# File patterns
# Note: .gitignore is automatically respected
files:
  include:
    - "**/*"  # Include all files (filtered by default extensions)
    # Or specify exact patterns:
    # - "src/**/*.js"
    # - "src/**/*.ts"
    # - "*.md"
  exclude:
    - "node_modules/**"
    - ".git/**"
    - "dist/**"
    - "build/**"
    - ".wiggumizer/**"
    - ".claude/**"
    - "docs/**"
    - "coverage/**"
    - "*.test.js"
    - "*.min.js"
    - "package-lock.json"
    - "yarn.lock"
    - "*.log"

# Multi-repo workspace support
# Uncomment to work across multiple repositories
# workspaces:
#   - name: backend          # Optional: friendly name for logging
#     path: ../my-backend    # Relative or absolute path
#     include:               # Optional: override file patterns
#       - "src/**/*.js"
#     exclude:
#       - "test/**"
#   - name: frontend
#     path: ../my-frontend
#     include:
#       - "src/**/*.tsx"
#       - "src/**/*.ts"

# Retry configuration for API calls
retry:
  maxRetries: 3        # Maximum number of retries
  baseDelay: 1000      # Base delay in milliseconds (1 second)
  maxDelay: 30000      # Maximum delay in milliseconds (30 seconds)

# Rate limiting configuration
rateLimit:
  requestsPerMinute: 50    # Maximum requests per minute
  requestsPerHour: 1000    # Maximum requests per hour

# Provider-specific configuration
providers:
  claude:
    model: claude-opus-4-5-20251101
    maxTokens: 16384  # Claude Opus 4.5 supports up to 32K output tokens

  claude-cli:
    model: claude-opus-4-5-20251101
    maxTokens: 16384  # Uses claude CLI instead of API

  openai:
    model: gpt-5
    maxTokens: 16384  # Increased from 8K to allow larger responses

# Chat Service Notifications
# Send notifications to Slack or WhatsApp on completion or errors
#
# Prerequisites:
#   Slack: Install Slack CLI - https://api.slack.com/automation/cli/install
#          Then authenticate with: slack login
#   WhatsApp: Install mudslide - npm install -g mudslide
#             Then authenticate: mudslide login
#
# chatProvider: slack          # Chat provider: 'slack' or 'whatsapp'
# channel: "#wiggumizer"       # Slack channel for notifications
# contact: "+1234567890"       # WhatsApp contact number (E.164 format)
# group: "Dev Team"            # WhatsApp group name
